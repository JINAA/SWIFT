# FCM

참고 : https://maruzzing.github.io/study/etc/FCM(Firebase-Cloud-Messaging)%EC%9D%B4%EB%9E%80/



실시간 채팅을 하는 것은 양쪽 클라이언트가 모두 접속해 있을 때 가능하다. 카톡처럼 앱의 다른 페이지에 있거나, 앱이 실행되지 않고 있을 때 푸시알람을 보내기 위해서는 FCM같은 Cloud Messasing 서버를 통해 데이터를 전달한다.

## FCM?

Firebase콘솔이나 서버에서 푸시를 보낼 수 있다.(= 타켓 모바일로 푸시를 보낼 수 있다.)

## FCM 동작

1. 모바일 디바이스에 앱이 설치되는 순간 Firebase 서버에 키 획득을 위한 요청을 보낸다.
2. Firebase 서버에서 키를 모바일 디바이스로 전달한다.
3. 모바일 앱 서버로 전달받은 키를 전송한다.
4. 서버는 전달받은 키를 db에 저장하여 타겟 모바일의 identification으로 사용한다.
5. db의 키와 전송하려는 데이터를 HTTP 통신으로 FIrebase 서버에 전달한다.
6. Firebase 서버에서는 전달받은 키 값을 식별하여 어떤 기기의 어떤 앱인지 식별한다.
7. 식별된 기기의 식별된 앱을 실행하여 데이터를 전달한다.(타겟 모바일의 앱은 백그라운드에 있어도 리스터로 이벤트를 감지한다.)